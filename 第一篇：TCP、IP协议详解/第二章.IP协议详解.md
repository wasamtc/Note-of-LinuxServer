# IP协议详解

IP协议是TCP/IP协议族的核心，除了路由和转发，还有IP的头部信息值得讨论。

## 一.IP服务的特点

为上层协议提供无状态、无连接、不可靠的服务。

## 二.IPv4头部结构

头部结构同计算机网络所学。

## 三.分片

IP头部加数据报长度超过MTU会分片

## 四.ICMP重定向

网络层最重要的功能就是路由和转发，关于如何路由与转发，书上已经解释，一般主机只能发送和接收数据，不能路由和转发，但是也可以开启这个功能，同时也考验开启发送ICMP重定向的功能。

所谓ICMP主机重定向是指当主机作为路由和转发功能使用时收到一个IP数据报，发现有更好的下一跳，于是它还是把这个数据报转发出去，但同时发送ICMP主机重定向数据报给发送源修改他的路由表使得他发送后续数据时能发送给更好的下一跳。